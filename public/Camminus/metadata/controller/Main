{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Main"
    },
    "name": "MyController",
    "designerId": "b7c67211-76a2-4d9c-98ed-58df0236ac63",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "form",
                "designer|targetType": "Ext.form.Panel",
                "fn": "onFormBeforeRender",
                "implHandler": [
                    "// custom Vtype for vtype:'uniqueUserName'",
                    "Ext.apply(Ext.form.field.VTypes, {",
                    "    uniqueUserName:  function(v) {",
                    "        Ext.Ajax.request({",
                    "            url: '/unique/User/user_name/' + v,",
                    "            method: 'GET',",
                    "            success: function(o) {",
                    "                if (o.responseText == 0) {",
                    "                    setusernamevalidfalse(v);",
                    "                }",
                    "            }",
                    "        });",
                    "        return true;",
                    "    },",
                    "",
                    "    uniqueUserNameText: 'Usu치rio j치 cadastrado. Escolha outro.'",
                    "});",
                    "",
                    "// custom Vtype for vtype:'uniqueCompanyDoc'",
                    "Ext.apply(Ext.form.field.VTypes, {",
                    "    uniqueCompanyDoc:  function(v) {",
                    "        Ext.Ajax.request({",
                    "            url: '/unique/Company/document/' + v,",
                    "            method: 'GET',",
                    "            success: function(o) {",
                    "                if (o.responseText == 0) {",
                    "                    setDocumentValidFalse(v);",
                    "                }",
                    "            }",
                    "        });",
                    "        return true;",
                    "    },",
                    "",
                    "    uniqueCompanyDocText: 'CNPJ j치 cadastrado.'",
                    "});",
                    "",
                    "// custom Vtype for vtype:'uniqueCostumerDoc'",
                    "Ext.apply(Ext.form.field.VTypes, {",
                    "    uniqueCostumerDoc:  function(v) {",
                    "        Ext.Ajax.request({",
                    "            url: '/unique/Costumer/document/' + v,",
                    "            method: 'GET',",
                    "            success: function(o) {",
                    "                if (o.responseText == 0) {",
                    "                    setCostumerDocumentValidFalse(v);",
                    "                }",
                    "            }",
                    "        });",
                    "        return true;",
                    "    },",
                    "",
                    "    uniqueCostumerDocText: 'Cliente j치 cadastrado.'",
                    "});",
                    "",
                    "function setusernamevalidfalse() {",
                    "    Ext.apply(Ext.form.field.VTypes, {",
                    "        uniqueUserName : function(val, field) {",
                    "            var username = val;",
                    "            Ext.Ajax.request({",
                    "                url: '/unique/User/user_name/' + username,",
                    "                method: 'GET',",
                    "                success: function(o) {",
                    "                    if (o.responseText == 0) {",
                    "                        setusernamevalidfalse(val);",
                    "                    } else {",
                    "                        setusernamevalidtrue(val);",
                    "                    }",
                    "                }",
                    "            });",
                    "            return false;",
                    "        }",
                    "    });",
                    "}",
                    "",
                    "function setusernamevalidtrue() {",
                    "    Ext.apply(Ext.form.field.VTypes, {",
                    "        uniqueUserName : function(val, field) {",
                    "            var username = val;",
                    "            Ext.Ajax.request({",
                    "                url: '/unique/User/user_name/' + username,",
                    "                method: 'GET',",
                    "                success: function(o) {",
                    "                    if (o.responseText == 0) {",
                    "                        setusernamevalidfalse(val);",
                    "                    } else {",
                    "                        setusernamevalidtrue(val);",
                    "                    }",
                    "                }",
                    "            });",
                    "            return true;",
                    "        }",
                    "    });",
                    "}",
                    "",
                    "",
                    "function setDocumentValidFalse() {",
                    "    Ext.apply(Ext.form.field.VTypes, {",
                    "        uniqueCompanyDoc : function(val, field) {",
                    "            var document = val;",
                    "            Ext.Ajax.request({",
                    "                url: '/unique/Company/document/' + document,",
                    "                method: 'GET',",
                    "                success: function(o) {",
                    "                    if (o.responseText == 0) {",
                    "                        setDocumentValidFalse(val);",
                    "                    } else {",
                    "                        setDocumentValidTrue(val);",
                    "                    }",
                    "                }",
                    "            });",
                    "            return false;",
                    "        }",
                    "    });",
                    "}",
                    "",
                    "function setDocumentValidTrue() {",
                    "    Ext.apply(Ext.form.field.VTypes, {",
                    "        uniqueCompanyDoc : function(val, field) {",
                    "            var document = val;",
                    "            Ext.Ajax.request({",
                    "                url: '/unique/Company/document/' + document,",
                    "                method: 'GET',",
                    "                success: function(o) {",
                    "                    if (o.responseText == 0) {",
                    "                        setDocumentValidFalse(val);",
                    "                    } else {",
                    "                        setDocumentValidTrue(val);",
                    "                    }",
                    "                }",
                    "            });",
                    "            return true;",
                    "        }",
                    "    });",
                    "}",
                    "",
                    "function setCostumerDocumentValidFalse() {",
                    "    Ext.apply(Ext.form.field.VTypes, {",
                    "        uniqueCostumerDoc : function(val, field) {",
                    "            var document = val;",
                    "            Ext.Ajax.request({",
                    "                url: '/unique/Costumer/document/' + document,",
                    "                method: 'GET',",
                    "                success: function(o) {",
                    "                    if (o.responseText == 0) {",
                    "                        setCostumerDocumentValidFalse(val);",
                    "                    } else {",
                    "                        setCostumerDocumentValidTrue(val);",
                    "                    }",
                    "                }",
                    "            });",
                    "            return false;",
                    "        }",
                    "    });",
                    "}",
                    "",
                    "function setCostumerDocumentValidTrue() {",
                    "    Ext.apply(Ext.form.field.VTypes, {",
                    "        uniqueCostumerDoc : function(val, field) {",
                    "            var document = val;",
                    "            Ext.Ajax.request({",
                    "                url: '/unique/Costumer/document/' + document,",
                    "                method: 'GET',",
                    "                success: function(o) {",
                    "                    if (o.responseText == 0) {",
                    "                        setCostumerDocumentValidFalse(val);",
                    "                    } else {",
                    "                        setCostumerDocumentValidTrue(val);",
                    "                    }",
                    "                }",
                    "            });",
                    "            return true;",
                    "        }",
                    "    });",
                    "}"
                ],
                "name": "beforerender",
                "scope": "me"
            },
            "name": "onFormBeforeRender",
            "designerId": "3fdc44e3-732c-4eb2-80e9-3247c9351c3c"
        }
    ]
}