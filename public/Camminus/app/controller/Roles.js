/*
 * File: app/controller/Roles.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Camminus.controller.Roles', {
    extend: 'Ext.app.Controller',

    stores: [
        'Roles'
    ],
    views: [
        'roles.Grid'
    ],

    refs: [
        {
            ref: 'rolesGrid',
            selector: 'rolesgrid'
        }
    ],

    onRolesGridpanelRender: function(component, eOpts) {
        this.getRolesStore().load();

    },

    onDeleteButtonClick: function(button, e, eOpts) {
        var grid = this.getRolesGrid(),
            record = grid.getSelectionModel().getSelection(),
            store = grid.getStore();


        if (record[0].data.name == "Admin"){
            Ext.Msg.show({
                title: translations.msg_title_warning,
                msg: "Não é possível apagar o grupo 'Admin'.",
                buttons: Ext.Msg.OK,
                icon: Ext.Msg.WARNING
            });
        }


        // Ext.Msg.show({

        //     title: translations.msg_title_delete,
        //     msg: translations.msg_delete,
        //     buttons: Ext.Msg.YESNO,
        //     icon: Ext.Msg.QUESTION,
        //     fn: function (buttonId){
        //         console.log(buttonId);
        //         if (buttonId == 'yes'){
        //             store.remove(record);
        //             store.sync();
        //         }
        //     }

        // });



    },

    init: function(application) {
        this.control({
            "rolesgrid": {
                render: this.onRolesGridpanelRender
            },
            "#deleteRole": {
                click: this.onDeleteButtonClick
            }
        });
    }

});
